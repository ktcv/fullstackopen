{"version":3,"sources":["components/InputField.js","components/Form.js","components/Person.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["InputField","htmlFor","label","type","value","onChange","className","id","Form","onSubmit","newName","handleNameChange","newNumber","handleNumberChange","Person","person","handleDelete","name","number","onClick","Persons","filter","persons","filteredPersons","map","key","baseUrl","axios","get","then","response","data","newObject","post","delete","put","Notification","message","App","useState","setPersons","setNewName","setNewNumber","setFilter","setFilteredPersons","notificationMessage","setNotificationMessage","useEffect","personService","initialPersons","notification","error","event","target","filtered","toLowerCase","includes","preventDefault","newPerson","alreadyExists","some","find","p","changedPerson","setTimeout","window","confirm","returnedPerson","catch","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6d6612e6.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst InputField = ({ htmlFor, label, type, value, onChange }) => (\r\n  <div>\r\n    {/* Add label with htmlFor for accessibility, id on input associates label with input element */}\r\n    <label className=\"label\" htmlFor={htmlFor}>\r\n      {label}\r\n    </label>\r\n    <input\r\n      type={type}\r\n      className=\"input\"\r\n      id={htmlFor}\r\n      value={value}\r\n      onChange={onChange}\r\n    />\r\n  </div>\r\n);\r\n\r\nexport default InputField;\r\n","import React from \"react\";\r\nimport InputField from \"./InputField\";\r\n\r\nconst Form = ({\r\n  onSubmit,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange\r\n}) => (\r\n  <form onSubmit={onSubmit}>\r\n    <InputField\r\n      label=\"Name:\"\r\n      htmlFor=\"name\"\r\n      type=\"text\"\r\n      value={newName}\r\n      onChange={handleNameChange}\r\n    />\r\n\r\n    <InputField\r\n      label=\"Number:\"\r\n      htmlFor=\"number\"\r\n      value={newNumber}\r\n      onChange={handleNumberChange}\r\n    />\r\n    <div>\r\n      <button className=\"button submit\" type=\"submit\">\r\n        Add\r\n      </button>\r\n    </div>\r\n  </form>\r\n);\r\n\r\nexport default Form;\r\n","import React from \"react\";\r\n\r\nconst Person = ({ person, handleDelete }) => (\r\n  <div className=\"person\">\r\n    <span className=\"person--name\">{person.name}</span>\r\n    <span className=\"person--number\">{person.number}</span>\r\n    <button className=\"button\" onClick={() => handleDelete(person.id)}>\r\n      Delete\r\n    </button>\r\n  </div>\r\n);\r\n\r\nexport default Person;\r\n","import React from \"react\";\r\nimport Person from \"./Person\";\r\n\r\nconst Persons = ({ filter, persons, filteredPersons, handleDelete }) => (\r\n  <div className=\"persons\">\r\n    {filter === \"\"\r\n      ? persons?.map(person => (\r\n          <Person\r\n            key={person.name}\r\n            person={person}\r\n            handleDelete={handleDelete}\r\n          />\r\n        ))\r\n      : filteredPersons?.map(person => (\r\n          <Person\r\n            key={person.name}\r\n            person={person}\r\n            handleDelete={handleDelete}\r\n          />\r\n        ))}\r\n  </div>\r\n);\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst deletePerson = id => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nexport default { getAll, create, deletePerson, update };\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, className }) => {\r\n  // Check for null or undefined with == instead of ===\r\n  if (message == null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className={className}>{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport InputField from \"./components/InputField\";\r\nimport Form from \"./components/Form\";\r\nimport Persons from \"./components/Persons\";\r\nimport personService from \"./services/persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [filter, setFilter] = useState(\"\");\r\n  const [filteredPersons, setFilteredPersons] = useState(null);\r\n  const [notificationMessage, setNotificationMessage] = useState(null);\r\n\r\n  // Fetch person data from json-server\r\n  useEffect(() => {\r\n    personService.getAll().then((initialPersons) => {\r\n      setPersons(initialPersons);\r\n    });\r\n  }, []);\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleFilter = (event) => {\r\n    setFilter(event.target.value);\r\n    const filtered = persons.filter((person) =>\r\n      // Check if the search term is included in the names in the phonebook\r\n      person.name.toLowerCase().includes(event.target.value.toLowerCase())\r\n    );\r\n\r\n    setFilteredPersons(filtered);\r\n  };\r\n\r\n  // submit form\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n    const newPerson = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    // Check if person is already added to the phoneboook.\r\n    const alreadyExists = persons.some((person) => person.name === newName);\r\n\r\n    // No name provided --> could be handled by displaying an error\r\n    // For now do nothing.\r\n    if (newName === \"\") {\r\n      return;\r\n    }\r\n\r\n    if (alreadyExists) {\r\n      const person = persons.find((p) => p.name === newName);\r\n      const changedPerson = { ...person, number: newNumber };\r\n      const { id } = person;\r\n\r\n      // Error handling for if the updated number is too short.\r\n      if (newNumber < 8) {\r\n        setNotificationMessage({\r\n          error: `${newNumber} is too short, please provide a number with at least 8 digits`,\r\n        });\r\n        setTimeout(() => {\r\n          setNotificationMessage(null);\r\n        }, 5000);\r\n        return;\r\n      }\r\n\r\n      const confirmUpdate = window.confirm(\r\n        `${newName} is already added to phonebook, replace the old number with a new one?`\r\n      );\r\n\r\n      if (confirmUpdate) {\r\n        personService\r\n          .update(id, changedPerson)\r\n          .then((returnedPerson) => {\r\n            // Update number in state\r\n            setPersons(\r\n              persons.map((person) =>\r\n                person.id !== id ? person : returnedPerson\r\n              )\r\n            );\r\n\r\n            setNotificationMessage({\r\n              notification: `Updated number for ${person.name}`,\r\n            });\r\n            setTimeout(() => {\r\n              setNotificationMessage(null);\r\n            }, 5000);\r\n          })\r\n          .catch((error) => {\r\n            setNotificationMessage({\r\n              error: `Information for ${person.name} has already been removed from server`,\r\n            });\r\n            setPersons(persons.filter((p) => p.id !== id));\r\n            setTimeout(() => {\r\n              setNotificationMessage(null);\r\n            }, 5000);\r\n          });\r\n      }\r\n      // clear input fields\r\n      setNewName(\"\");\r\n      setNewNumber(\"\");\r\n      return;\r\n    }\r\n\r\n    personService\r\n      .create(newPerson)\r\n      .then((returnedPerson) => {\r\n        setPersons(persons.concat(returnedPerson));\r\n\r\n        setNotificationMessage({\r\n          notification: `Added ${returnedPerson.name}`,\r\n        });\r\n        setTimeout(() => {\r\n          setNotificationMessage(null);\r\n        }, 5000);\r\n\r\n        // clear input fields\r\n        setNewName(\"\");\r\n        setNewNumber(\"\");\r\n      })\r\n      .catch((error) => {\r\n        setNotificationMessage(error.response.data);\r\n        setTimeout(() => {\r\n          setNotificationMessage(null);\r\n        }, 5000);\r\n      });\r\n  };\r\n\r\n  const handleDelete = (id) => {\r\n    const person = persons.find((p) => p.id === id);\r\n    const confirmDelete = window.confirm(`Delete ${person.name}?`);\r\n    if (confirmDelete) {\r\n      personService.deletePerson(id).then(() => {\r\n        //Update state --> filter out deleted person\r\n        const filteredPersons = persons.filter((person) => person.id !== id);\r\n        setPersons(filteredPersons);\r\n\r\n        // reset filter\r\n        setFilter(\"\");\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"container\">\r\n      <h1>Phonebook</h1>\r\n      <Notification\r\n        message={\r\n          notificationMessage?.notification || notificationMessage?.error\r\n        }\r\n        className={notificationMessage?.notification ? \"notification\" : \"error\"}\r\n      />\r\n\r\n      {/* Filter by name */}\r\n      <InputField\r\n        label=\"Filter shown with\"\r\n        htmlFor=\"filter\"\r\n        type=\"text\"\r\n        value={filter}\r\n        onChange={handleFilter}\r\n      />\r\n\r\n      <h2>Add a new</h2>\r\n      <Form\r\n        onSubmit={addPerson}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n        filter={filter}\r\n        persons={persons}\r\n        filteredPersons={filteredPersons}\r\n        handleDelete={handleDelete}\r\n      />\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}